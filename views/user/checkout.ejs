<!-- Include Stripe.js library -->
<script src="https://js.stripe.com/v3/"></script>

<%- include('../partials/header') %>

<!-- Display user's profile information -->
<div class="user-profile">
  <h2>My Profile</h2>
  <p><strong>Name:</strong> <%= userDetails.name %></p>
  <p><strong>Email:</strong> <%= userDetails.email %></p>
  <!-- Add more profile information as needed -->
</div>

<!-- Display shipping address from the order model -->
<div class="shipping-address">
  <h2>Shipping Address</h2>
  <p><strong>Street Address:</strong> <%= latestorder.shippingAddress.street %></p>
  <p><strong>City:</strong> <%= latestorder.shippingAddress.city %></p>
  <p><strong>State / Country:</strong> <%=latestorder.shippingAddress.state %></p>
  <p><strong>Postcode / Zip:</strong> <%= latestorder.shippingAddress.postalCode %></p>
  <!-- Add more address fields as needed -->
</div>

<!-- Display user's cart items with product images -->
<div class="cart-items">
  <h2>My Cart</h2>
  <% cart.items.forEach(item => { %>
      <!-- ... Cart item details as before ... -->
  <% }); %>
</div>

<!-- Display subtotal, discounted total, and total -->
<div class="order-summary">
  <h2>Order Summary</h2>
  <p>Subtotal: $<%= subtotal.toFixed(2) %></p>
  <p>Discounted Total: $<%= discountedTotal.toFixed(2) %></p>
  <p>Total: $<%= discountedTotal.toFixed(2) %></p>
</div>

<!-- Hidden fields for subtotal and discounted total -->
<input type="hidden" name="subtotal" value="<%= subtotal.toFixed(2) %>">
<input type="hidden" name="discountedTotal" value="<%= discountedTotal.toFixed(2) %>">

<!-- Complete purchase button -->
<button class="complete-purchase-btn" type="submit">Complete Purchase</button>

  

<%- include('../partials/footer') %>
